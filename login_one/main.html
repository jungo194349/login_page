<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Login by GODAN account</title>
        <link rel="stylesheet" href="main.css">
    </head>
    <body>

        <!-- new overlay (aka. alert_box_1) -->
        <div class="overlay" id="overlay">
            <div class="box">
                <h2 id="alert_box_1_type">Empty Overlay Box</h2>
                <p id="alert_box_1_title" class="alert_box_1_title">Error : Empty Message</p>
                <button class="close-btn" id="close-btn">Close</button>
            </div>
        </div>
    
        <!-- <button onclick="openOverlay()">Open Overlay</button> -->
    


        <!-- title -->
        <div class="title">
            <div class="title_title">
                <svg width="50" height="50">
                    <image href="image/icon.png" height="50" width="50"/>
                </svg>
                <p>GODAN account로 로그인</p>
            </div>
            <h3>해당 서비스를 이용하기 위해 로그인이 필요합니다.</h3>
        </div><br>

        <!-- login 되있으면 표시되는 상자 -->
        <div class="logined" id="logined">
            <h2>이미 로그인이 되어있습니다.</h2>
            <h3>메인 페이지로 가려면 <a href="main_page.html">여기</a>를 누르세요.</h3>
        </div><br>

        <!-- login box -->
        <div id="login_box" class="login_box">
                <label for="fname">ID or Email</label>
                <input type="text" id="id"><br/>
                <label for="lname">Password</label>
                <input type="text" id="password">
                <button id="login_bt">Login</button>
            
        </div>

        <br><br><br>

        <!-- id and pw 4 test -->
        <div class="title">
            <p>test용 ID & PW</p>
            <p>ID : Admin , PW : Admin</p>
        </div>

        <script>
            
            // alert close button

            document.getElementById("close-btn").addEventListener('click', function(){
                alert1('none')
                if (localStorage.getItem('isLoggedIn') == 'true') {
                    window.location.href = 'main_page.html';
                }
            });

            // if pw or id not empty

            document.getElementById('login_bt').addEventListener('click', function(){
                id_value = document.getElementById("id").value
                pw_value = document.getElementById("password").value
                if (id_value == "") {
                    if (pw_value == ""){
                    //id랑 p둘다 없을때
                    alert1('flex', 'ID&Password Empty', 'rgb(252, 103, 103', 'Login failed');
                    console.warn("Login failed : ID&Password Empty")
                    } else {
                    //id만 없을때
                    alert1('flex', 'ID Empty', 'rgb(252, 103, 103', 'Login failed');
                    console.warn("Login failed : ID Empty") 
                    }
                } else {
                    if (pw_value == "") {
                        //password만 없을때
                        alert1('flex', 'Password Empty', 'rgb(252, 103, 103', 'Login failed');
                        console.warn("Login failed : Password Empty")
                    } else {
                        login()
                    }
                }
            });


            //alert1 display

            function alert1(statue, display, bgcolor, type){
                // document.getElementById('overlay').style.display = 'flex';
                $('#overlay').css('display',statue)
                // $('#alert_box_1').css('display', statue);
                $('#alert_box_1_title').text(display);
                $('#close-btn').css('background-color', bgcolor);
                $('#alert_box_1_type').text(type);
                console.log("alert1 updated staute : " + statue + " , display : [" + display + "] , background color : " + bgcolor + ", type : " + type)
            }

            //ck id and password

            function login() {
                id_value = document.getElementById("id").value
                pw_value = document.getElementById("password").value
                if (id_value == 'Admin' && pw_value == 'Admin') {
                    // id & pw가 맞음
                    localStorage.setItem('isLoggedIn', 'true');
                    console.log('now isLoggedIn is : '+ localStorage.getItem('isLoggedIn') )
                    alert1('flex', 'login complete', 'rgb(143, 154, 255', 'Good News!');
                    
                } else {
                    // id or pw가 틀림
                    alert1('flex', 'ID or Password incorrect', 'rgb(252, 103, 103', 'Login failed');
                    console.warn("Login failed : ID or Password incorrect")
                }
            }

            //로그인 되있으면 안내문 표시
            function loginck() {
                if (localStorage.getItem('isLoggedIn') == 'true') {
                    // $('#logined').css('display','block')
                    document.getElementById('logined').style.display = 'block'
                }
            }

            //페이지 로드시 loginck 실행
            document.addEventListener('DOMContentLoaded', loginck())

        </script>
        
        <!-- jquery -->
        <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

    </body>
</html>